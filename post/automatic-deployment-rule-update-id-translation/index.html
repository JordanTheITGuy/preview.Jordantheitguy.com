<!doctype html><html dir=ltr lang=en data-theme=dark><head>
<title>
Jordan Benzing
|
Automatic Deployment Rule Update ID Translation
</title>
<meta charset=utf-8><meta name=generator content="Hugo 0.92.2"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover">
<meta name=description content="
      A speedy guide on how to convert Update ID's


    ">
<link rel=stylesheet href=/css/main.min.db014ffeb1f9f8d8ca6cf10049b6503179b7cd8b435a5757d85b9c6e880bc638.css integrity="sha256-2wFP/rH5+NjKbPEASbZQMXm3zYtDWldX2FucbogLxjg=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=/css/markupHighlight.min.058b31f17db60602cc415fd63b0427e7932fbf35c70d8e341a4c39385f5f6f3e.css integrity="sha256-BYsx8X22BgLMQV/WOwQn55MvvzXHDY40Gkw5OF9fbz4=" crossorigin=anonymous type=text/css>
<link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA==" crossorigin=anonymous>
<link rel="shortcut icon" href=/favicons/favicon.ico type=image/x-icon>
<link rel=apple-touch-icon sizes=180x180 href=/favicons/apple-touch-icon.png>
<link rel=icon type=image/png sizes=32x32 href=/favicons/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicons/favicon-16x16.png>
<link rel=canonical href=http://preview.jordantheitguy.com/post/automatic-deployment-rule-update-id-translation/>
<script type=text/javascript src=/js/anatole-header.min.2a2cd9614b7d007dfbb75e8da19e3a0fa872ceab53c6d000c00b7a0c89b85bfc.js integrity="sha256-KizZYUt9AH37t16NoZ46D6hyzqtTxtAAwAt6DIm4W/w=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.7fd87181cdd7e8413aa64b6867bb32f3a8dc242e684fc7d5bbb9f600dbc2b6eb.js integrity="sha256-f9hxgc3X6EE6pktoZ7sy86jcJC5oT8fVu7n2ANvCtus=" crossorigin=anonymous></script>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Automatic Deployment Rule   Update ID Translation">
<meta name=twitter:description content="A speedy guide on how to convert Update ID's">
<script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"Automatic Deployment Rule   Update ID Translation","headline":"Automatic Deployment Rule   Update ID Translation","alternativeHeadline":"","description":"
      A speedy guide on how to convert Update ID\u0027s


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/preview.jordantheitguy.com\/post\/automatic-deployment-rule-update-id-translation\/"},"author":{"@type":"Person","name":"Jordan Benzing"},"creator":{"@type":"Person","name":"Jordan Benzing"},"accountablePerson":{"@type":"Person","name":"Jordan Benzing"},"copyrightHolder":{"@type":"Person","name":"Jordan Benzing"},"copyrightYear":"2021","dateCreated":"2021-11-12T00:00:00.00Z","datePublished":"2021-11-12T00:00:00.00Z","dateModified":"2021-11-12T00:00:00.00Z","publisher":{"@type":"Organization","name":"Jordan Benzing","url":"http://preview.jordantheitguy.com/","logo":{"@type":"ImageObject","url":"http:\/\/preview.jordantheitguy.com\/favicons\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"http:\/\/preview.jordantheitguy.com\/post\/automatic-deployment-rule-update-id-translation\/","wordCount":"573","genre":["ConfigMgr"],"keywords":["ConfigMgr","PowerShell"]}</script>
</head>
<body>
<header><div class="page-top
.">
<a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
<span aria-hidden=true></span>
</a>
<nav>
<ul class=nav__list id=navMenu>
<div class=nav__links>
<li>
<a href=/ title>Home</a>
</li>
<li>
<a href=/post/ title>Posts</a>
</li>
<li>
<a href=/about/ title>About</a>
</li>
</div>
<ul>
<li>
<a class=theme-switch title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i>
</a>
</li>
</ul>
</ul>
</nav>
</div>
</header>
<div class=wrapper>
<aside><div class="sidebar
.">
<div class=sidebar__content>
<div class=logo-title>
<div class=title>
<img src=/images/JordanTheITGuy.png alt="profile picture">
<h3 title><a href=/>I'm JordanTheITGuy</a></h3>
<div class=description>
<p>I currently work as an Engineer at Patch My PC. <br>I also do some consulting work in the world of IT on the side. <br>I'm a Microsoft MVP for EMS.<br></p>
</div>
</div>
</div>
<ul class=social-links>
<li>
<a href=https://twitter.com/JordanTheITguy rel=me aria-label=Twitter title=Twitter>
<i class="fab fa-twitter fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://github.com/JordanTheITGuy rel=me aria-label=Github title=Github>
<i class="fab fa-github fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://www.youtube.com/c/JordanTheItGuy rel=me aria-label=Youtube title=Youtube>
<i class="fab fa-youtube fa-2x" aria-hidden=true></i>
</a>
</li>
<li>
<a href=https://www.linkedin.com/in/jordan-benzing-432b0619/ rel=me aria-label=Linkedin title=Linkedin>
<i class="fab fa-linkedin fa-2x" aria-hidden=true></i>
</a>
</li>
</ul>
</div><footer class="footer footer--sidebar">
<div class=by_farbox>
<ul class=footer__list>
<li class=footer__item>
&copy;
Jordan Benzing
2022
</li>
</ul>
</div>
</footer>
<script type=text/javascript src=/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FGZGWGHKYG"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FGZGWGHKYG')</script>
</div>
</aside>
<main>
<div class=autopagerize_page_element>
<div class=content>
<div class="post
.">
<div class=post-content>
<img class=post-thumbnail src=/images/blogPosts/ADR-UpdateIDTranslation/UpdateGatherData.png alt="Thumbnail image">
<div class=post-title>
<h1>Automatic Deployment Rule Update ID Translation</h1>
<div class=info>
<em class="fas fa-calendar-day"></em>
<span class=date>
Fri, Nov 12, 2021
</span>
<em class="fas fa-stopwatch"></em>
<span class=reading-time>3-minute read</span>
</div>
</div><p>If you’ve ever worked with Automatic Deployment Rules, at some point an update has failed to download. While you might be familiar with the RuleEngine.log file, did know the “updateID” is the “CI_ID”? If you’ve ever tried to find a software update via CI_ID, you know you’re going to one of two places, and neither of them is the console. Essentially, if you’re here you’re looking for an easy way to figure out what update caused this error:</p>
<p><img src=/images/blogPosts/ADR-UpdateIDTranslation/ADR-DownloadError.png alt=ADR-UpdateError></p>
<p>For those of you who already know what this is and just want the quick answer here you go:</p>
<h3 id=powershell-method>PowerShell Method</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">0</span><span style=color:#6272a4>#Enter the site code here</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>$siteCode</span> = <span style=color:#f1fa8c>&#34;XYZ&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#6272a4>#Enter the CI ID</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#8be9fd;font-style:italic>$ciID</span> = <span style=color:#f1fa8c>&#34;11111111&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#8be9fd;font-style:italic>Get-CimInstance</span> -ClassName SMS_SoftwareUpdate -Namespace <span style=color:#f1fa8c>&#34;root\SMS\site_</span>$(<span style=color:#8be9fd;font-style:italic>$SiteCode</span>)<span style=color:#f1fa8c>&#34;</span> -Filter <span style=color:#f1fa8c>&#34;CI_ID = </span>$(<span style=color:#8be9fd;font-style:italic>$ciID</span>)<span style=color:#f1fa8c>&#34;</span> | <span style=color:#8be9fd;font-style:italic>Select-Object</span> LocalizedDisplayName,DateCreated
</code></pre></div><h3 id=sql-method>SQL Method</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsql data-lang=tsql><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 0</span><span style=color:#6272a4>--Where XXXXX is the update ID from the logs with an error
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#6272a4></span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#ff79c6>SELECT</span> <span style=color:#ff79c6>*</span> <span style=color:#ff79c6>FROM</span> v_UpdateInfo <span style=color:#ff79c6>WHERE</span> CI_ID <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;XXXXXX&#39;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#6272a4>--or for more strategic data
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#6272a4></span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#ff79c6>SELECT</span> dbo.v_UpdateInfo.CI_ID
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>	, dbo.v_UpdateInfo.ArticleID
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>	, dbo.v_UpdateInfo.Title
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>	, dbo.v_UpdateInfo.CI_UniqueID
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>	, dbo.v_UpdateInfo.InfoURL
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span style=color:#ff79c6>FROM</span> v_UpdateInfo <span style=color:#ff79c6>WHERE</span> CI_ID <span style=color:#ff79c6>=</span> <span style=color:#f1fa8c>&#39;XXXXX&#39;</span>
</code></pre></div><h2 id=what-does-this-error-mean>What Does this Error Mean?</h2>
<p>In this scenario, the ADR has failed because it was unable to download content an example error for this might be:</p>
<p><code>Failed to download ContentID 16778383 for UpdateID 16779809. Error code = 404</code></p>
<p>While this might be a pretty simple error (Can’t download the content, content not found, cause I deleted it) – what’s not clear is the name of the update causing the issue, and trying to determine the name of the update from a series of numbers might be frustrating.</p>
<h2 id=getting-update-info-with-powershell>Getting Update Info with PowerShell</h2>
<p>If you’ve worked with Configuration Manager for any length of time then you know it’s all WMI at the end of the day. In this case, software updates and their information exist within the Site Namespace, and have a class called “SMS_SoftwareUpdate”. You can actually retrieve all of the updates, and their associated properties by just requesting the objects that are of type SMS_SoftwareUpdate. This is pretty simple to get using the below line. When you do this, make sure you update line with your site code. This is pretty neat as you can get a lot of general information about software updates directly via PowerShell.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">0</span><span style=color:#8be9fd;font-style:italic>Get-CimInstance</span> -ClassName SMS_SoftwareUpdate -Namespace <span style=color:#f1fa8c>&#34;root\SMS\site_DM6&#34;</span>
</code></pre></div><p><img src=/images/blogPosts/ADR-UpdateIDTranslation/GetCim-Example.png alt=CimExample></p>
<p>If we take a close look you can see the CI_ID field here which of course means you can filter on it as was done in the example at the top of the article, so in this case we could run:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">0</span><span style=color:#6272a4>#Enter the site code here</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1</span><span style=color:#8be9fd;font-style:italic>$siteCode</span> = <span style=color:#f1fa8c>&#34;XYZ&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2</span><span style=color:#6272a4>#Enter the CI ID</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3</span><span style=color:#8be9fd;font-style:italic>$ciID</span> = <span style=color:#f1fa8c>&#34;16779809&#34;</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4</span><span style=color:#8be9fd;font-style:italic>Get-CimInstance</span> -ClassName SMS_SoftwareUpdate -Namespace <span style=color:#f1fa8c>&#34;root\SMS\site_</span>$(<span style=color:#8be9fd;font-style:italic>$SiteCode</span>)<span style=color:#f1fa8c>&#34;</span> -Filter <span style=color:#f1fa8c>&#34;CI_ID = </span>$(<span style=color:#8be9fd;font-style:italic>$ciID</span>)<span style=color:#f1fa8c>&#34;</span> | <span style=color:#8be9fd;font-style:italic>Select-Object</span> LocalizedDisplayName,DateCreated
</code></pre></div><p>With this we get the below output which includes the date the update was created, and the name of the update causing the issue.</p>
<p><img src=/images/blogPosts/ADR-UpdateIDTranslation/example.png alt=Example></p>
<h2 id=getting-information-with-sql>Getting Information with SQL</h2>
<p>We can also get this information from SQL. Fortunately the SQL information is a little more transparent in my opinion, because CI_ID is the primary key which is used in a lot of locations across the Configuration Manager Database. For this use case it’s the primary key in the view:</p>
<p><code>v_UpdateInfo</code></p>
<p>If we run a select * from this view we will find all of the pieces we need for this particular puzzle, and from there we can create the SQL query like we did above to find out the name of the update which was causing this issue.</p>
<p><img src=/images/blogPosts/ADR-UpdateIDTranslation/sqlExample.png alt=Example></p>
</div>
<div class=post-footer>
<div class=info>
<span class=separator><a class=category href=/categories/configmgr/>ConfigMgr</a></span>
<span class=separator><a class=tag href=/tags/configmgr/>ConfigMgr</a><a class=tag href=/tags/powershell/>PowerShell</a></span>
</div>
</div>
<div id=fb_comments_container>
<h2>comments</h2>
<script src=https://utteranc.es/client.js repo=JordanTheITGuy/jordantheitguy.com-comments issue-term=title theme=preferred-color-scheme crossorigin=anonymous async></script>
</div>
</div>
</div>
</div>
</main>
</div><footer class="footer footer--base">
<div class=by_farbox>
<ul class=footer__list>
<li class=footer__item>
&copy;
Jordan Benzing
2022
</li>
</ul>
</div>
</footer>
<script type=text/javascript src=/js/medium-zoom.min.71100d84fab0ad794b8399a66ac810700cc78d703f715dc10af4d7ba7b761362.js integrity="sha256-cRANhPqwrXlLg5mmasgQcAzHjXA/cV3BCvTXunt2E2I=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-FGZGWGHKYG"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-FGZGWGHKYG')</script>
</body>
</html>