<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="noodp">
<meta http-equiv=x-ua-compatible content="IE=edge, chrome=1">
<title>Automatic Deployment Rule Update ID Translation - JordanTheITGuy</title><meta name=description content="A speedy guide on how to convert Update ID's"><meta property="og:title" content="Automatic Deployment Rule   Update ID Translation">
<meta property="og:description" content="A speedy guide on how to convert Update ID's">
<meta property="og:type" content="article">
<meta property="og:url" content="http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/"><meta property="og:image" content="http://preview.jordantheitguy.com/images/logo.png"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-11-12T00:00:00+00:00">
<meta property="article:modified_time" content="2021-11-12T00:00:00+00:00">
<meta name=twitter:card content="summary_large_image">
<meta name=twitter:image content="http://preview.jordantheitguy.com/images/logo.png">
<meta name=twitter:title content="Automatic Deployment Rule   Update ID Translation">
<meta name=twitter:description content="A speedy guide on how to convert Update ID's">
<meta name=application-name content="JordanTheITGuy">
<meta name=apple-mobile-web-app-title content="JordanTheITGuy"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/><link rel=prev href=http://preview.jordantheitguy.com/posts/query-defender-for-endpoint-part-2/><link rel=next href=http://preview.jordantheitguy.com/posts/find-log4j-with-intune-proactive-remediations/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Automatic Deployment Rule   Update ID Translation","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/preview.jordantheitguy.com\/posts\/automatic-deployment-rule-update-id-translation\/"},"genre":"posts","keywords":"ConfigMgr, PowerShell","wordcount":543,"url":"http:\/\/preview.jordantheitguy.com\/posts\/automatic-deployment-rule-update-id-translation\/","datePublished":"2021-11-12T00:00:00+00:00","dateModified":"2021-11-12T00:00:00+00:00","publisher":{"@type":"Organization","name":"Jordan Benzing"},"author":{"@type":"Person","name":"Jordan Benzing"},"description":"A speedy guide on how to convert Update ID's"}</script></head>
<body header-desktop header-mobile><script type=text/javascript>(''==='true'&&window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script>
<div id=mask></div><div class=wrapper><header class=desktop id=header-desktop>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title=JordanTheITGuy><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/internalLogo.png data-srcset="/images/internalLogo.png, /images/internalLogo.png 1.5x, /images/internalLogo.png 2x" data-sizes=auto alt=/images/internalLogo.png title=/images/internalLogo.png><span id=id-1 class=typeit></span></a>
</div>
<div class=menu>
<div class=menu-inner><a class=menu-item href=/posts/> Posts </a><a class=menu-item href=/tags/> Tags </a><a class=menu-item href=/categories/> Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-desktop>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a>
</div>
</div>
</div>
</header><header class=mobile id=header-mobile>
<div class=header-container>
<div class=header-wrapper>
<div class=header-title>
<a href=/ title=JordanTheITGuy><img class="lazyload logo" src=/svg/loading.min.svg data-src=/images/internalLogo.png data-srcset="/images/internalLogo.png, /images/internalLogo.png 1.5x, /images/internalLogo.png 2x" data-sizes=auto alt=/images/internalLogo.png title=/images/internalLogo.png><span id=id-2 class=typeit></span></a>
</div>
<div class=menu-toggle id=menu-toggle-mobile>
<span></span><span></span><span></span>
</div>
</div>
<div class=menu id=menu-mobile><div class=search-wrapper>
<div class="search mobile" id=search-mobile>
<input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search>
<i class="fas fa-search fa-fw"></i>
</a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear>
<i class="fas fa-times-circle fa-fw"></i>
</a>
<span class="search-button search-loading" id=search-loading-mobile>
<i class="fas fa-spinner fa-fw fa-spin"></i>
</span>
</div>
<a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>
Cancel
</a>
</div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i>
</a></div>
</div>
</header>
<div class="search-dropdown desktop">
<div id=search-dropdown-desktop></div>
</div>
<div class="search-dropdown mobile">
<div id=search-dropdown-mobile></div>
</div>
<main class=main>
<div class=container><div class=toc id=toc-auto>
<h2 class=toc-title>Contents</h2>
<div class=toc-content id=toc-content-auto></div>
</div><article class="page single"><h1 class="single-title animated flipInX">Automatic Deployment Rule Update ID Translation</h1><div class=post-meta>
<div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author>Jordan Benzing</a></span>&nbsp;<span class=post-category>included in <a href=/categories/configmgr/><i class="far fa-folder fa-fw"></i>ConfigMgr</a></span></div>
<div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-11-12>2021-11-12</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;543 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;3 minutes&nbsp;</div>
</div><div class="details toc" id=toc-static kept>
<div class="details-summary toc-title">
<span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span>
</div>
<div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#powershell-method>PowerShell Method</a></li>
<li><a href=#sql-method>SQL Method</a></li>
</ul>
</li>
<li><a href=#what-does-this-error-mean>What Does this Error Mean?</a></li>
<li><a href=#getting-update-info-with-powershell>Getting Update Info with PowerShell</a></li>
<li><a href=#getting-information-with-sql>Getting Information with SQL</a></li>
</ul>
</nav></div>
</div><div class=content id=content><p>If you’ve ever worked with Automatic Deployment Rules, at some point an update has failed to download. While you might be familiar with the RuleEngine.log file, did know the “updateID” is the “CI_ID”? If you’ve ever tried to find a software update via CI_ID, you know you’re going to one of two places, and neither of them is the console. Essentially, if you’re here you’re looking for an easy way to figure out what update caused this error:</p>
<p><img class=lazyload src=/svg/loading.min.svg data-src=/images/blogPosts/ADR-UpdateIDTranslation/ADR-DownloadError.png data-srcset="/images/blogPosts/ADR-UpdateIDTranslation/ADR-DownloadError.png, /images/blogPosts/ADR-UpdateIDTranslation/ADR-DownloadError.png 1.5x, /images/blogPosts/ADR-UpdateIDTranslation/ADR-DownloadError.png 2x" data-sizes=auto alt=/images/blogPosts/ADR-UpdateIDTranslation/ADR-DownloadError.png title=ADR-UpdateError></p>
<p>For those of you who already know what this is and just want the quick answer here you go:</p>
<h3 id=powershell-method>PowerShell Method</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=ln>0</span><span class=c>#Enter the site code here</span>
<span class=ln>1</span><span class=nv>$siteCode</span> <span class=p>=</span> <span class=s2>&#34;XYZ&#34;</span>
<span class=ln>2</span><span class=c>#Enter the CI ID</span>
<span class=ln>3</span><span class=nv>$ciID</span> <span class=p>=</span> <span class=s2>&#34;11111111&#34;</span>
<span class=ln>4</span><span class=nb>Get-CimInstance</span> <span class=n>-ClassName</span> <span class=n>SMS_SoftwareUpdate</span> <span class=n>-Namespace</span> <span class=s2>&#34;root\SMS\site_</span><span class=p>$(</span><span class=nv>$SiteCode</span><span class=p>)</span><span class=s2>&#34;</span> <span class=n>-Filter</span> <span class=s2>&#34;CI_ID = </span><span class=p>$(</span><span class=nv>$ciID</span><span class=p>)</span><span class=s2>&#34;</span> <span class=p>|</span> <span class=nb>Select-Object</span> <span class=n>LocalizedDisplayName</span><span class=p>,</span><span class=n>DateCreated</span>
</code></pre></div><h3 id=sql-method>SQL Method</h3>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-tsql data-lang=tsql><span class=ln> 0</span><span class=c1>--Where XXXXX is the update ID from the logs with an error
</span><span class=ln> 1</span><span class=c1></span><span class=w>
</span><span class=ln> 2</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=k>FROM</span><span class=w> </span><span class=n>v_UpdateInfo</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CI_ID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;XXXXXX&#39;</span><span class=w>
</span><span class=ln> 3</span><span class=w></span><span class=c1>--or for more strategic data
</span><span class=ln> 4</span><span class=c1></span><span class=w>
</span><span class=ln> 5</span><span class=w></span><span class=k>SELECT</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>v_UpdateInfo</span><span class=p>.</span><span class=n>CI_ID</span><span class=w>
</span><span class=ln> 6</span><span class=w>	</span><span class=p>,</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>v_UpdateInfo</span><span class=p>.</span><span class=n>ArticleID</span><span class=w>
</span><span class=ln> 7</span><span class=w>	</span><span class=p>,</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>v_UpdateInfo</span><span class=p>.</span><span class=n>Title</span><span class=w>
</span><span class=ln> 8</span><span class=w>	</span><span class=p>,</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>v_UpdateInfo</span><span class=p>.</span><span class=n>CI_UniqueID</span><span class=w>
</span><span class=ln> 9</span><span class=w>	</span><span class=p>,</span><span class=w> </span><span class=n>dbo</span><span class=p>.</span><span class=n>v_UpdateInfo</span><span class=p>.</span><span class=n>InfoURL</span><span class=w>
</span><span class=ln>10</span><span class=w></span><span class=k>FROM</span><span class=w> </span><span class=n>v_UpdateInfo</span><span class=w> </span><span class=k>WHERE</span><span class=w> </span><span class=n>CI_ID</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s1>&#39;XXXXX&#39;</span><span class=w>
</span></code></pre></div><h2 id=what-does-this-error-mean>What Does this Error Mean?</h2>
<p>In this scenario, the ADR has failed because it was unable to download content an example error for this might be:</p>
<p><code>Failed to download ContentID 16778383 for UpdateID 16779809. Error code = 404</code></p>
<p>While this might be a pretty simple error (Can’t download the content, content not found, cause I deleted it) – what’s not clear is the name of the update causing the issue, and trying to determine the name of the update from a series of numbers might be frustrating.</p>
<h2 id=getting-update-info-with-powershell>Getting Update Info with PowerShell</h2>
<p>If you’ve worked with Configuration Manager for any length of time then you know it’s all WMI at the end of the day. In this case, software updates and their information exist within the Site Namespace, and have a class called “SMS_SoftwareUpdate”. You can actually retrieve all of the updates, and their associated properties by just requesting the objects that are of type SMS_SoftwareUpdate. This is pretty simple to get using the below line. When you do this, make sure you update line with your site code. This is pretty neat as you can get a lot of general information about software updates directly via PowerShell.</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=ln>0</span><span class=nb>Get-CimInstance</span> <span class=n>-ClassName</span> <span class=n>SMS_SoftwareUpdate</span> <span class=n>-Namespace</span> <span class=s2>&#34;root\SMS\site_DM6&#34;</span>
</code></pre></div><p><img class=lazyload src=/svg/loading.min.svg data-src=/images/blogPosts/ADR-UpdateIDTranslation/GetCim-Example.png data-srcset="/images/blogPosts/ADR-UpdateIDTranslation/GetCim-Example.png, /images/blogPosts/ADR-UpdateIDTranslation/GetCim-Example.png 1.5x, /images/blogPosts/ADR-UpdateIDTranslation/GetCim-Example.png 2x" data-sizes=auto alt=/images/blogPosts/ADR-UpdateIDTranslation/GetCim-Example.png title=CimExample></p>
<p>If we take a close look you can see the CI_ID field here which of course means you can filter on it as was done in the example at the top of the article, so in this case we could run:</p>
<div class=highlight><pre tabindex=0 class=chroma><code class=language-powershell data-lang=powershell><span class=ln>0</span><span class=c>#Enter the site code here</span>
<span class=ln>1</span><span class=nv>$siteCode</span> <span class=p>=</span> <span class=s2>&#34;XYZ&#34;</span>
<span class=ln>2</span><span class=c>#Enter the CI ID</span>
<span class=ln>3</span><span class=nv>$ciID</span> <span class=p>=</span> <span class=s2>&#34;16779809&#34;</span>
<span class=ln>4</span><span class=nb>Get-CimInstance</span> <span class=n>-ClassName</span> <span class=n>SMS_SoftwareUpdate</span> <span class=n>-Namespace</span> <span class=s2>&#34;root\SMS\site_</span><span class=p>$(</span><span class=nv>$SiteCode</span><span class=p>)</span><span class=s2>&#34;</span> <span class=n>-Filter</span> <span class=s2>&#34;CI_ID = </span><span class=p>$(</span><span class=nv>$ciID</span><span class=p>)</span><span class=s2>&#34;</span> <span class=p>|</span> <span class=nb>Select-Object</span> <span class=n>LocalizedDisplayName</span><span class=p>,</span><span class=n>DateCreated</span>
</code></pre></div><p>With this we get the below output which includes the date the update was created, and the name of the update causing the issue.</p>
<p><img class=lazyload src=/svg/loading.min.svg data-src=/images/blogPosts/ADR-UpdateIDTranslation/example.png data-srcset="/images/blogPosts/ADR-UpdateIDTranslation/example.png, /images/blogPosts/ADR-UpdateIDTranslation/example.png 1.5x, /images/blogPosts/ADR-UpdateIDTranslation/example.png 2x" data-sizes=auto alt=/images/blogPosts/ADR-UpdateIDTranslation/example.png title=Example></p>
<h2 id=getting-information-with-sql>Getting Information with SQL</h2>
<p>We can also get this information from SQL. Fortunately the SQL information is a little more transparent in my opinion, because CI_ID is the primary key which is used in a lot of locations across the Configuration Manager Database. For this use case it’s the primary key in the view:</p>
<p><code>v_UpdateInfo</code></p>
<p>If we run a select * from this view we will find all of the pieces we need for this particular puzzle, and from there we can create the SQL query like we did above to find out the name of the update which was causing this issue.</p>
<p><img class=lazyload src=/svg/loading.min.svg data-src=/images/blogPosts/ADR-UpdateIDTranslation/sqlExample.png data-srcset="/images/blogPosts/ADR-UpdateIDTranslation/sqlExample.png, /images/blogPosts/ADR-UpdateIDTranslation/sqlExample.png 1.5x, /images/blogPosts/ADR-UpdateIDTranslation/sqlExample.png 2x" data-sizes=auto alt=/images/blogPosts/ADR-UpdateIDTranslation/sqlExample.png title=Example></p>
</div><div class=post-footer id=post-footer>
<div class=post-info>
<div class=post-info-line>
<div class=post-info-mod>
<span>Updated on 2021-11-12</span>
</div>
<div class=post-info-license></div>
</div>
<div class=post-info-line>
<div class=post-info-md></div>
<div class=post-info-share>
<span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/ data-title="Automatic Deployment Rule   Update ID Translation" data-via=@JordanTheITGuy data-hashtags=ConfigMgr,PowerShell><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/ data-hashtag=ConfigMgr><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/ data-title="Automatic Deployment Rule   Update ID Translation" data-web><i class="fab fa-whatsapp fa-fw"></i></a><a href=javascript:void(0); title="Share on Reddit" data-sharer=reddit data-url=http://preview.jordantheitguy.com/posts/automatic-deployment-rule-update-id-translation/><i class="fab fa-reddit fa-fw"></i></a></span>
</div>
</div>
</div>
<div class=post-info-more>
<section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/configmgr/>ConfigMgr</a>,&nbsp;<a href=/tags/powershell/>PowerShell</a></section>
<section>
<span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span>
</section>
</div>
<div class=post-nav><a href=/posts/query-defender-for-endpoint-part-2/ class=prev rel=prev title="Query Defender for Endpoint Part 2"><i class="fas fa-angle-left fa-fw"></i>Query Defender for Endpoint Part 2</a>
<a href=/posts/find-log4j-with-intune-proactive-remediations/ class=next rel=next title="Find Log4J With Intune Proactive Remediations">Find Log4J With Intune Proactive Remediations<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id=comments><div id=utterances></div><noscript>
Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.
</noscript></div></article></div>
</main><footer class=footer>
<div class=footer-container><div class=footer-line>Powered by ☕ and 🍜</div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2022</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank rel="noopener noreferrer">Jordan Benzing</a></span></div>
</div>
</footer></div>
<div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top">
<i class="fas fa-arrow-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments">
<i class="fas fa-comment fa-fw"></i>
</a>
</div><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript src=/lib/typeit/typeit.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{utterances:{darkTheme:"github-dark",issueTerm:"title",label:"",lightTheme:"github-light",repo:"JordanTheITGuy/jordantheitguy.com-comments"}},data:{"id-1":"JordanTheITGuy","id-2":"JordanTheITGuy"},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"},typeit:{cursorChar:'\u003cspan style="color: #BD93F9" \u003e|\u003c/span\u003e',cursorSpeed:1e3,data:{"id-1":["id-1"],"id-2":["id-2"]},duration:-1,speed:75}}</script><script type=text/javascript src=/js/theme.min.js></script></body>
</html>